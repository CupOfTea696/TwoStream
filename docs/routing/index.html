<!DOCTYPE html><html lang="en-us" id="twostream"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>TwoStream by CupOfTea696</title><base href="http://twostream.cupoftea.io"><link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'><link rel="stylesheet" href="/assets/css/app.css?cb=79a4a10e5dcc99daa5f83d42d21bfd62"></head><body> <nav class="nav"> <section class="nav/left"> <a href="" class="nav/item">TwoStream</a> </section> <section class="nav/right"> <a href="docs" class="nav/item">Documentation</a> <a href="docs/api" class="nav/item">API</a> </section> </nav><section class="main-content" id="docs-routing"><div class="body clearfix"><ol class="breadcrumb"><li class="breadcrumb/item"> <a href="">Home</a></li><li class="breadcrumb/item"> <a href="docs">Documentation</a></li><li class="breadcrumb/item --active">Routing</li></ol> <aside class="sidebar"> <nav><ul class="sidebar/nav"><li class="sidebar/nav/category">Getting Started</li><li class="sidebar/nav/item"> <a href="docs/installation">Installation</a></li><li class="sidebar/nav/item"> <a href="docs/configuration">Configuration</a></li><li class="sidebar/nav/item"> <a href="docs/server">Running TwoStream</a></li><li class="sidebar/nav/category">The Basics</li><li class="sidebar/nav/item --active">Routing</li><li class="sidebar/nav/item"> <a href="docs/controllers">Controllers</a></li><li class="sidebar/nav/item"> <a href="docs/requests">Requests</a></li><li class="sidebar/nav/item"> <a href="docs/responses">Responses</a></li><li class="sidebar/nav/category">Services</li><li class="sidebar/nav/item"> <a href="docs/exceptions">Error Handling</a></li><li class="sidebar/nav/item"> <a href="docs/events">Events</a></li><li class="sidebar/nav/item"> <a href="docs/twostream">TwoStream</a></li><li class="sidebar/nav/item"> <a href="docs/ws-session">WsSession</a></li></ul> </nav> </aside><main id="content" class="page"><h1 id="routing">Routing</h1><ul class="toc"><li class="toc/item"> <a data-scrollto="basic-routing">Basic Routing</a><ul class="toc/level toc"><li class="toc/item"><a data-scrollto="subscribe-routes">SUBSCRIBE Routes</a></li><li class="toc/item"><a data-scrollto="unsubscribe-routes">UNSUBSCRIBE Routes</a></li><li class="toc/item"><a data-scrollto="publish-routes">PUBLISH Routes</a></li><li class="toc/item"><a data-scrollto="call-routes">CALL Routes</a></li></ul></li><li class="toc/item"><a data-scrollto="notes">Notes</a></li></ul><p>TwoStream provides an easy way to handle WebSocket Topic Events through the provided WsRoute Facade. This allows you to blend in your code in a way that should already be very familliar to you from the default Laravel Routes and Controllers. To put it simple: Anything you can do with an HTTP request, you can now do for Topic Events, in virtually the same way!</p><h2 id="basic-routing">Basic Routing</h2><p>You can define your Topic Event Routes for your application in the <code>app/Ws/routes.php</code> file, which is your TwoStreams's equivalent to the <code>app/Http/routes.php</code> file you know from Laravel. In addition to that, the route's Topic (equivalent to URL in your HTTP routes) supports both values in the format <code>chat/room/{id}</code> and <code>com.myapp.multiply</code>.</p><h3 id="subscribe-routes">SUBSCRIBE Routes</h3><p>The Subscribe Event gets triggered when a Client subscribes to a topic. In the example below, we have a callback function that gets triggered every time a Client subscribes to a chat room.</p><div class="highlight"><pre><code class="language-text" data-lang="text">WsRoute::subscribe('chat/room/{id}', function($id)
{
    return 'You connected to chat room ' . $id;
});
</code></pre></div><h3 id="unsubscribe-routes">UNSUBSCRIBE Routes</h3><p>The Unsubcribe Event is the opposite of the subscribe event, and gets triggered every time a Client unsubscribes from a topic.</p><div class="highlight"><pre><code class="language-text" data-lang="text">WsRoute::unsubscribe('chat/room/{id}', function($id)
{
    return 'You disconnected to chat room ' . $id;
});
</code></pre></div><h3 id="publish-routes">PUBLISH Routes</h3><p>The Publish Event is triggered when a client Publishes data to a topic. The data can be retrieved by using <code>Request::input('data');</code>. More info on Publish Data can be found in the Requests Documentation.</p><div class="highlight"><pre><code class="language-text" data-lang="text">WsRoute::publish('blog/create', function()
{
    $data = Request::input('data');
});
</code></pre></div><h3 id="call-routes">CALL Routes</h3><p>The Call Event is triggered when the Client performs an RPC to the WebSocket Server. This is the only route that requires a response. If the Procedure does not need to return any data to the Client, you can just return true and the default success message will be sent. If you don't return anything however, an error message is sent to the Client.</p><div class="highlight"><pre><code class="language-text" data-lang="text">WsRoute::call('math/mult/{a}/{b}', function($a, $b)
{
    return $a * $b;
});
</code></pre></div><h2 id="notes">Notes</h2><p>Please know that although all above examples use Closures, the recommended way to handle Events is through Controllers, which will be addressed in the next chapter.</p> </main></div> <footer class="site-footer"> <span class="site-footer-owner"> <a href="https://github.com/CupOfTea696/TwoStream/">TwoStream</a> is maintained by <a href="https://github.com/CupOfTea696">CupOfTea696</a>. </span> </footer> </section> <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script><script src="/assets/js/app.js?cb=d735cbd9e60a21104256df7ee8382009"></script></body></html>