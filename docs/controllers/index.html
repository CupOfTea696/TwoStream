<!DOCTYPE html><html lang="en-us" id="twostream"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>TwoStream by CupOfTea696</title><base href="http://twostream.cupoftea.io"><link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'><link rel="stylesheet" href="/assets/css/app.css?cb=79a4a10e5dcc99daa5f83d42d21bfd62"></head><body> <nav class="nav"> <section class="nav/left"> <a href="" class="nav/item">TwoStream</a> </section> <section class="nav/right"> <a href="docs" class="nav/item">Documentation</a> <a href="docs/api" class="nav/item">API</a> </section> </nav><section class="main-content" id="docs-controllers"><div class="body clearfix"><ol class="breadcrumb"><li class="breadcrumb/item"> <a href="">Home</a></li><li class="breadcrumb/item"> <a href="docs">Documentation</a></li><li class="breadcrumb/item --active">Controllers</li></ol> <aside class="sidebar"> <nav><ul class="sidebar/nav"><li class="sidebar/nav/category">Getting Started</li><li class="sidebar/nav/item"> <a href="docs/installation">Installation</a></li><li class="sidebar/nav/item"> <a href="docs/configuration">Configuration</a></li><li class="sidebar/nav/item"> <a href="docs/server">Running TwoStream</a></li><li class="sidebar/nav/category">The Basics</li><li class="sidebar/nav/item"> <a href="docs/routing">Routing</a></li><li class="sidebar/nav/item --active">Controllers</li><li class="sidebar/nav/item"> <a href="docs/requests">Requests</a></li><li class="sidebar/nav/item"> <a href="docs/responses">Responses</a></li><li class="sidebar/nav/category">Services</li><li class="sidebar/nav/item"> <a href="docs/exceptions">Error Handling</a></li><li class="sidebar/nav/item"> <a href="docs/events">Events</a></li><li class="sidebar/nav/item"> <a href="docs/twostream">TwoStream</a></li><li class="sidebar/nav/item"> <a href="docs/ws-session">WsSession</a></li></ul> </nav> </aside><main id="content" class="page"><h1 id="controllers">Controllers</h1><ul class="toc"><li class="toc/item"><a data-scrollto="introduction">Introduction</a></li><li class="toc/item"><a data-scrollto="basic-controllers">Basic Controllers</a></li><li class="toc/item"><a data-scrollto="special-controllers">Special Controllers</a></li></ul><h2 id="introduction">Introduction</h2><p>Controllers for WebSocket Routes are located in <code>app/Ws/Controllers</code>. It is highly recommended that you use Controllers instead of Closures in your routes file.</p><h2 id="basic-controllers">Basic Controllers</h2><p>Here is an example of a basic Controller Class:</p><div class="highlight"><pre><code class="language-php" data-lang="php"><span class="k">namespace</span> <span class="nx">App\Ws\Controllers</span><span class="p">;</span>

<span class="k">use</span> <span class="nx">App\Ws\Controllers\Controller</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">ChatController</span> <span class="k">extends</span> <span class="nx">Controller</span>
<span class="p">{</span>

    <span class="sd">/**</span>
<span class="sd">     * Connect the user to given chatroom</span>
<span class="sd">     *</span>
<span class="sd">     * @param  int  $id</span>
<span class="sd">     * @return Response</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">roomConnect</span><span class="p">(</span><span class="nv">$id</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="s1">'You connected to chat room '</span> <span class="o">.</span> <span class="nv">$id</span><span class="p">;</span>
    <span class="p">}</span>

<span class="p">}</span>
</code></pre></div><p>Routing to the Controller Action works in the same way you're used to from Laravel:</p><div class="highlight"><pre><code class="language-php" data-lang="php"><span class="nx">WsRoute</span><span class="o">::</span><span class="na">subscribe</span><span class="p">(</span><span class="s1">'chat/room/{id}'</span><span class="p">,</span> <span class="s1">'ChatController@roomConnect'</span><span class="p">);</span>
</code></pre></div><p><u><strong>Note:</strong> All controllers should extend the base <code>Ws\Controller</code> class, not Laravel's base Controller class!</u></p><h2 id="special-controllers">Special Controllers</h2><p>Laravel provides two special types of Controllers: Implicit and RESTful Resource Controllers. Implicit Controllers work in the same way they do in Laravel, so if you're not sure on how they work go check the <a href="http://laravel.com/docs/5.0/controllers#implicit-controllers">Documentation</a>.</p><p>RESTful Controllers do not exist within TwoStream. The <code>WsRoute</code> Facade does not provide the <code>resource()</code> function, and attempting to use it will result in an error.</p> </main></div> <footer class="site-footer"> <span class="site-footer-owner"> <a href="https://github.com/CupOfTea696/TwoStream/">TwoStream</a> is maintained by <a href="https://github.com/CupOfTea696">CupOfTea696</a>. </span> </footer> </section> <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script><script src="/assets/js/app.js?cb=d735cbd9e60a21104256df7ee8382009"></script></body></html>